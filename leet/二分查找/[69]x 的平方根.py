# å®ç° int sqrt(int x) å‡½æ•°ã€‚ 
# 
#  è®¡ç®—å¹¶è¿”å› x çš„å¹³æ–¹æ ¹ï¼Œå…¶ä¸­ x æ˜¯éè´Ÿæ•´æ•°ã€‚ 
# 
#  ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œç»“æœåªä¿ç•™æ•´æ•°çš„éƒ¨åˆ†ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚ 
# 
#  ç¤ºä¾‹ 1: 
# 
#  è¾“å…¥: 4
# è¾“å‡º: 2
#  
# 
#  ç¤ºä¾‹ 2: 
# 
#  è¾“å…¥: 8
# è¾“å‡º: 2
# è¯´æ˜: 8 çš„å¹³æ–¹æ ¹æ˜¯ 2.82842..., 
# Â     ç”±äºè¿”å›ç±»å‹æ˜¯æ•´æ•°ï¼Œå°æ•°éƒ¨åˆ†å°†è¢«èˆå»ã€‚
#  
#  Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ 
#  ğŸ‘ 667 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
import math


class Solution:
    def mySqrt0(self, x: int) -> int:
        """è¢–çè®¡ç®—å™¨ç®—æ³•ï¼Œç”¨æŒ‡æ•°å‡½æ•° exp  å’Œå¯¹æ•°å‡½æ•° ln  ä»£æ›¿å¹³æ–¹æ ¹å‡½æ•°çš„æ–¹æ³•
        x^0.5 = (e^ln(x))^0.5 = e^(0.5*ln(x))"""
        if x == 0:
            return 0
        ans = int(math.exp(0.5 * math.log(x)))
        # æµ®ç‚¹æ•°é—®é¢˜ï¼Œæˆ‘ä»¬åº”å½“æ‰¾å‡º ans  ä¸ ans1  ä¸­å“ªä¸€ä¸ªæ˜¯çœŸæ­£çš„ç­”æ¡ˆ
        return ans + 1 if (ans + 1) ** 2 <= x else ans

    def mySqrt(self, x: int) -> int:
        """ç‰›é¡¿æ³•
        è¿™é‡Œå…ˆæŠŠxæ”¹åä¸ºnï¼Œæ–¹ä¾¿å†™å‡½æ•°æ¨å¯¼ï¼Œå†™ä»£ç çš„æ—¶å€™å†åè¿‡æ¥ã€‚
        å®šä¹‰å‡½æ•° f(x) = x**2 - n
        ä¸€é˜¶æ³°å‹’å±•å¼€ï¼Œå¹¶ä»¤å…¶=0æ±‚é©»ç‚¹ f(x0) + f'(x0)(x-x0) = 0
        x = x0-f(x0)/f'(x0) = x0-(x0**2-n)/2x0 = x0- (x0-n/x0)/2
        """
        if x == 0:  # æ³¨æ„è¿™ä¸ªç‰¹æ®Šæ¡ä»¶ï¼Œå¦åˆ™åç»­n - (n - x / n) / 2ä¼šé™¤ä»¥0ã€‚
            return 0
        threshold = 0.0001
        n = x
        while True:
            pre = n
            n = n - (n - x / n) / 2
            # è¿™é‡Œæ¯”æ£€æŸ¥abs(mid ** 2 - x) <= thresholdæ›´å¥½ï¼Œä¸€ä¸ªæ˜¯ä¸ç”¨å†è®¡ç®—å¹³æ–¹ï¼Œ
            # ä¸€ä¸ªæ˜¯å¯èƒ½å‡ºç°æ­»å¾ªç¯ï¼Œthreshold=1e-7ï¼Œx=2147395599æ—¶ï¼Œ46339.999989210184ä¼šä¸€ç›´æ­»å¾ªç¯ï¼Œåªèƒ½æ˜¯è°ƒå°é˜ˆå€¼
            if abs(n - pre) < threshold:
                break
        return int(n)

    def mySqrt3_1(self, x: int) -> int:
        """ç‰›é¡¿æ³•"""
        if x == 0:
            return 0
        threshold = 0.0001
        n = x
        pre = n
        n = n - (n - x / n) / 2
        while abs(n - pre) > threshold:
            pre = n
            n = n - (n - x / n) / 2
        return int(n)

    def mySqrt4(self, x: int) -> int:
        """ç‰›é¡¿æ³•
        åˆ¤æ–­æ¡ä»¶abs(n ** 2 - x) > thresholdï¼Œè®¡ç®—å¹³æ–¹ï¼Œä¸å¦‚mySqrt3
        f(x) = x**2 - n
        f(x0) + f'(x0)(x-x0) = 0
        x = x0-f(x0)/f'(x0)
          = x0- (x0-n/x0)/2
        """
        threshold = 0.001
        n = x
        while abs(n ** 2 - x) > threshold:
            n = n - (n - x / n) / 2
        return int(n)

    def mySqrt1(self, x: int) -> int:
        """äºŒåˆ†æ³•1
        åœ¨[0, x)ä¸Š æ‰¾åˆ°æ»¡è¶³t**2=xçš„t
        ç”±äºè¿™é‡Œé™åˆ¶tæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥æ˜¯æ‰¾åˆ°æ»¡è¶³t**2<=xçš„æœ€å¤§tï¼Œå³tçš„å³è¾¹ç•Œ
        æ³¨æ„ï¼šæœç´¢åŒºé—´[0, x)å­˜åœ¨ç‰¹æ®Šæƒ…å†µï¼Œx=0å’Œ1çš„æ—¶å€™ ï¼ŒåŒºé—´ä¸ºç©º
        """
        # åé¢ä½¿ç”¨çš„æ˜¯while l < råœ¨[0, x)ä¸Šæœç´¢ï¼Œæ‰€ä»¥x=0å’Œ1çš„æ—¶å€™ï¼Œæœç´¢åŒºé—´ä¸ºç©ºï¼Œè¦ç‰¹æ®Šå¤„ç†
        if x <= 1:
            return x
        l, r = 0, x
        while l < r:
            mid = l + (r - l) // 2
            if mid ** 2 <= x:
                l = mid + 1
            elif mid ** 2 > x:
                r = mid
        return l - 1

    def mySqrt2(self, x: int) -> int:
        """äºŒåˆ†æ³•2ï¼Œä¼˜äºäºŒåˆ†æ³•1
        åœ¨[0, x)ä¸Š æ‰¾åˆ°æ»¡è¶³t**2=xçš„t
        ç”±äºè¿™é‡Œé™åˆ¶tæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥æ˜¯æ‰¾åˆ°æ»¡è¶³t**2<=xçš„æœ€å¤§tï¼Œå³tçš„å³è¾¹ç•Œ
        æ³¨æ„ï¼šæœç´¢åŒºé—´[0, x)å­˜åœ¨ç‰¹æ®Šæƒ…å†µï¼Œx=0å’Œ1çš„æ—¶å€™ ï¼ŒåŒºé—´ä¸ºç©º
        æ‰€ä»¥æ”¹ä¸º åœ¨[0, x]ä¸Š æ‰¾åˆ°æ»¡è¶³t**2<=xçš„æœ€å¤§tï¼Œå³tçš„å³è¾¹ç•Œ
        """
        l, r = 0, x
        while l <= r:
            mid = l + (r - l) // 2
            if mid ** 2 <= x:
                l = mid + 1
            elif mid ** 2 > x:
                r = mid - 1
        return l - 1
# leetcode submit region end(Prohibit modification and deletion)
