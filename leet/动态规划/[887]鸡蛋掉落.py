# ç»™ä½  k æšç›¸åŒçš„é¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä»ç¬¬ 1 å±‚åˆ°ç¬¬ n å±‚å…±æœ‰ n å±‚æ¥¼çš„å»ºç­‘ã€‚
# 
#  å·²çŸ¥å­˜åœ¨æ¥¼å±‚ f ï¼Œæ»¡è¶³ 0 <= f <= n ï¼Œä»»ä½•ä» é«˜äº f çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» f æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚ 
# 
#  æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å–ä¸€æšæ²¡æœ‰ç¢çš„é¸¡è›‹å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ x æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= x <= nï¼‰ã€‚å¦‚æœé¸¡è›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æ¬¡ä½¿ç”¨å®ƒã€‚å¦‚æœæŸæšé¸¡è›‹æ‰”ä¸‹åæ²¡æœ‰æ‘”ç¢
# ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åçš„æ“ä½œä¸­ é‡å¤ä½¿ç”¨ è¿™æšé¸¡è›‹ã€‚ 
# 
#  è¯·ä½ è®¡ç®—å¹¶è¿”å›è¦ç¡®å®š f ç¡®åˆ‡çš„å€¼ çš„ æœ€å°æ“ä½œæ¬¡æ•° æ˜¯å¤šå°‘ï¼Ÿ 
# 
#  ç¤ºä¾‹ 1ï¼š 
# 
#  
# è¾“å…¥ï¼šk = 1, n = 2
# è¾“å‡ºï¼š2
# è§£é‡Šï¼š
# é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 0 ã€‚ 
# å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 1 ã€‚ 
# å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¾—å‡º f = 2 ã€‚ 
# å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š f æ˜¯å¤šå°‘ã€‚ 
#  
# 
#  ç¤ºä¾‹ 2ï¼š 
# 
#  
# è¾“å…¥ï¼šk = 2, n = 6
# è¾“å‡ºï¼š3
#  
# 
#  ç¤ºä¾‹ 3ï¼š 
# 
#  
# è¾“å…¥ï¼šk = 3, n = 14
# è¾“å‡ºï¼š4
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  1 <= k <= 100 
#  1 <= n <= 10â´ 
#  
# 
#  Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ ğŸ‘ 1004 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def superEggDrop(self, k: int, n: int) -> int:
        """ææ°¸ä¹è€å¸ˆè®²è§£å†™æ³•ï¼Œé€»è¾‘æ²¡é—®é¢˜ï¼Œä½†æ˜¯superEggDrop(4, 5000))ä¼šè¶…æ—¶ï¼Œæ‰€ä»¥è¿™é‡Œå åŠ äºŒåˆ†æ³•ä¼˜åŒ–
        å®˜æ–¹é¢˜è§£çš„æ–¹æ³•1ç›¸åŒï¼Œåªæ˜¯å®˜è§£ç”¨çš„å¸¦è®°å¿†çš„é€’å½’ï¼Œè¿™é‡Œç”¨çš„å¾ªç¯ã€‚
        å¤æ‚åº¦O(kn2) é™ä½è‡³ O(knlogn)
        Mi(n,k) = max(M(i,k-1), M(n-i,k)) + 1
        M(n,k) = min(M1,M2,...Mn)
        """
        #  dp[i][j]è¡¨ç¤ºå…±iå±‚æ¥¼jä¸ªé¸¡è›‹æ—¶æœ€å°‘è¦è¯•å‡ æ¬¡ä¿è¯èƒ½æ‰¾åˆ°ä¸´ç•Œç‚¹
        dp = [[0] * (k + 1) for _ in range(n + 1)]
        for i in range(1, n + 1):
            # é¸¡è›‹æ•°é‡ä¸º1æ—¶ï¼Œåªèƒ½ä¸€å±‚å±‚ä»ä½åˆ°é«˜å»è¯•ï¼Œæ‰€ä»¥å…±iæ¬¡
            dp[i][1] = i
            for j in range(2, k + 1):
                # dp[x-1][j-1]éšç€hé€’å¢ï¼Œdp[i - x][j]éšç€xé€’å‡ï¼Œmin(max())å…¶å®ä¸¤ä¸ªå‡½æ•°çš„å°±æ˜¯äº¤ç‚¹
                # äºŒåˆ†æŸ¥æ‰¾ï¼Œdp[mid-1][j-1] > dp[i - mid][j] åˆ™è¦æ‰¾çš„é‚£ä¸ªx'å°±åœ¨midå³è¾¹ï¼Œå¦åˆ™åœ¨midå·¦è¾¹
                # æœ€åæ¯”è¾ƒäº¤ç‚¹å·¦å³ä¸¤ä¾§çš„ä¸¤ä¸ªå€¼å°±å¯ä»¥ï¼Œä¸ç”¨éå†è®¡ç®—å…¨éƒ¨
                l, r = 1, i
                while l + 1 < r:
                    mid = l + (r - l) // 2
                    t1 = dp[mid - 1][j - 1]
                    t2 = dp[i - mid][j]
                    if t1 < t2:
                        l = mid
                    elif t1 > t2:
                        r = mid
                    elif t1 == t2:
                        l = r = mid

                dp[i][j] = min(max(dp[t - 1][j - 1], dp[i - t][j]) + 1 for t in (l, r))
                # åŸæœ¬è¦éå†iæ¬¡å…¨éƒ¨è®¡ç®—ï¼ŒäºŒåˆ†æ³•ä½¿å¾—è¿™ä¸€å±‚çš„å¤æ‚åº¦ä»O(n)é™ä½ä¸ºO(log(n))
                # dp[i][j] = n  # æœ€å¤§ä¹Ÿå°±næ¬¡
                # for x in range(1, i + 1):
                #     Mh = max(dp[x - 1][j - 1], dp[i - x][j]) + 1
                #     dp[i][j] = min(dp[i][j], Mh)
        return dp[n][k]

    def superEggDrop0(self, k: int, n: int) -> int:
        """ææ°¸ä¹è€å¸ˆè®²è§£å†™æ³•ï¼Œé€»è¾‘æ²¡é—®é¢˜ï¼Œä½†æ˜¯superEggDrop(4, 5000))ä¼šè¶…æ—¶ï¼Œéœ€è¦ç”¨äºŒåˆ†æ³•ä¼˜åŒ–ï¼Œå®˜æ–¹é¢˜è§£çš„æ–¹æ³•1
        å¤æ‚åº¦O(kn2)
        Mi(n,k) = max(M(i,k-1), M(n-i,k)) + 1
        M(n,k) = min(M1,M2,...Mn)
        """
        #  dp[i][j]è¡¨ç¤ºå…±iå±‚æ¥¼jä¸ªé¸¡è›‹æ—¶æœ€å°‘è¦è¯•å‡ æ¬¡ä¿è¯èƒ½æ‰¾åˆ°ä¸´ç•Œç‚¹
        dp = [[0] * (k + 1) for _ in range(n + 1)]
        for i in range(1, n + 1):
            # é¸¡è›‹æ•°é‡ä¸º1æ—¶ï¼Œåªèƒ½ä¸€å±‚å±‚ä»ä½åˆ°é«˜å»è¯•ï¼Œæ‰€ä»¥å…±iæ¬¡
            dp[i][1] = i
            for j in range(2, k + 1):
                dp[i][j] = n  # æœ€å¤§ä¹Ÿå°±næ¬¡
                for h in range(1, i + 1):
                    Mh = max(dp[h - 1][j - 1], dp[i - h][j]) + 1
                    dp[i][j] = min(dp[i][j], Mh)
        # return dp[i][j]
        return dp[n][k]

    def superEggDrop2(self, k: int, n: int) -> int:
        """å®˜æ–¹é¢˜è§£æ–¹æ³•3ï¼šæ•°å­¦æ³•ã€‚æ—¶é—´å¤æ‚åº¦ï¼šO(kn)
        dp[i][j] ä¸å­˜å‚¨ç›´æ¥çš„ç­”æ¡ˆï¼Œè½¬æ¢æ€è·¯ï¼Œå­˜ä¸€ä¸ªä¸­é—´å˜é‡ï¼ŒåŒæ—¶èƒ½å†™å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±è¡Œã€‚

        åè¿‡æ¥æƒ³è¿™ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘ä»¬å¯ä»¥åš t æ¬¡æ“ä½œï¼Œè€Œä¸”æœ‰ k ä¸ªé¸¡è›‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½æ‰¾åˆ°ç­”æ¡ˆçš„æœ€é«˜çš„ n æ˜¯å¤šå°‘ï¼Ÿ
        æˆ‘ä»¬è®¾ f(t,k) ä¸ºåœ¨ä¸Šè¿°æ¡ä»¶ä¸‹çš„ nã€‚å¦‚æœæˆ‘ä»¬æ±‚å‡ºäº†æ‰€æœ‰çš„ f(t,k)ï¼Œé‚£ä¹ˆåªéœ€è¦æ‰¾å‡ºæœ€å°çš„æ»¡è¶³ f(t,k)â‰¥n çš„ tã€‚

        é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ±‚å‡º f(t,k) å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨åŠ¨æ€è§„åˆ’ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æ‰¾å‡ºæœ€é«˜çš„ nï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…æ€è€ƒåˆ°åº•åœ¨å“ªé‡Œæ‰”è¿™ä¸ªé¸¡è›‹ï¼Œ
        æˆ‘ä»¬åªéœ€è¦æ‰”å‡ºä¸€ä¸ªé¸¡è›‹ï¼Œçœ‹çœ‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼š
            å¦‚æœé¸¡è›‹æ²¡æœ‰ç¢ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ˜¯ f(tâˆ’1,k)ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸€å±‚çš„ä¸Šæ–¹å¯ä»¥æœ‰ f(tâˆ’1,k) å±‚ï¼›
            å¦‚æœé¸¡è›‹ç¢äº†ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ˜¯ f(tâˆ’1,kâˆ’1)ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸€å±‚çš„ä¸‹æ–¹å¯ä»¥æœ‰ f(tâˆ’1ï¼Œkâˆ’1) å±‚ã€‚
            çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šf(t,k)=1+f(tâˆ’1,kâˆ’1)+f(tâˆ’1,k)
            è¾¹ç•Œæ¡ä»¶ä¸ºï¼šå½“ tâ‰¥1 çš„æ—¶å€™ f(t,1)=tï¼Œå½“ kâ‰¥1 æ—¶ï¼Œf(1,k)=1ã€‚
        """
        if n == 1:
            return 1
        f = [[0] * (k + 1) for _ in range(n + 1)]
        for i in range(1, k + 1):
            f[1][i] = 1
        ans = -1
        for i in range(2, n + 1):
            for j in range(1, k + 1):
                f[i][j] = 1 + f[i - 1][j - 1] + f[i - 1][j]
            if f[i][k] >= n:
                ans = i
                break
        return ans


# k1 = 3
# n1 = 39
# print(Solution().superEggDrop(k1, n1))  # 19
# print(Solution().superEggDrop0(k1, n1))  # 19
# print(Solution().superEggDrop2(k1, n1))  # 19
# leetcode submit region end(Prohibit modification and deletion)
