# ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬ i å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚ 
# 
#  è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰: 
# 
#  
#  ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚ 
#  å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚ 
#  
# 
#  ç¤ºä¾‹: 
# 
#  è¾“å…¥: [1,2,3,0,2]
# è¾“å‡º: 3 
# è§£é‡Š: å¯¹åº”çš„äº¤æ˜“çŠ¶æ€ä¸º: [ä¹°å…¥, å–å‡º, å†·å†»æœŸ, ä¹°å…¥, å–å‡º] 
#  Related Topics åŠ¨æ€è§„åˆ’ 
#  ğŸ‘ 757 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        """ç©ºé—´ä¼˜åŒ–
        æ³¨æ„åˆ°ä¸Šé¢çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ï¼Œf[i][..] åªä¸ f[i-1][..] æœ‰å…³ï¼Œè€Œä¸ f[i-2][..] åŠä¹‹å‰çš„æ‰€æœ‰çŠ¶æ€éƒ½æ— å…³ï¼Œ
        å› æ­¤æˆ‘ä»¬ä¸å¿…å­˜å‚¨è¿™äº›æ— å…³çš„çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦å°† f[i-1][0]ï¼Œf[i-1][1]ï¼Œf[i-1][2] å­˜æ”¾åœ¨ä¸‰ä¸ªå˜é‡ä¸­ï¼Œ
        é€šè¿‡å®ƒä»¬è®¡ç®—å‡º f[i][0]ï¼Œf[i][1]ï¼Œf[i][2] å¹¶å­˜å›å¯¹åº”çš„å˜é‡ï¼Œä»¥ä¾¿äºç¬¬ i+1 å¤©çš„çŠ¶æ€è½¬ç§»å³å¯ã€‚
        """
        n = len(prices)
        # dp0 æ‰‹ä¸ŠæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š
        # dp1 æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”å¤„äºå†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        # dp2 æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”ä¸åœ¨å†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        dp0, dp1, dp2 = -prices[0], 0, 0
        for i in range(n):
            cur_dp1 = dp0 + prices[i]  # æ³¨æ„é¡ºåºï¼Œå¦åˆ™å¾—å†™ä¸‰ä¸ªä¸´æ—¶å˜é‡
            dp0 = max(dp0, dp2 - prices[i])
            dp2 = max(dp1, dp2)
            dp1 = cur_dp1
        return max(dp1, dp2)

    def maxProfit11(self, prices: List[int]) -> int:
        """åŠ¨æ€è§„åˆ’,å¯¹æ¯”maxProfit1ï¼Œdp é•¿åº¦åˆå§‹åŒ–ä¸º n+1"""
        n = len(prices)
        # dp[i][0] æ‰‹ä¸ŠæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š
        # dp[i][1] æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”å¤„äºå†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        # dp[i][2] æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”ä¸åœ¨å†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        dp = [[-prices[0], 0, 0]] + [[0] * 3 for _ in range(n)]

        for i in range(1, n + 1):
            # print('i: ', i)
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][2] - prices[i - 1])
            dp[i][1] = dp[i - 1][0] + prices[i - 1]
            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2])

        return max(dp[n][1], dp[n][2])

    def maxProfit1(self, prices: List[int]) -> int:
        """åŠ¨æ€è§„åˆ’"""
        n = len(prices)
        # dp[i][0] æ‰‹ä¸ŠæŒæœ‰è‚¡ç¥¨çš„æœ€å¤§æ”¶ç›Š
        # dp[i][1] æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”å¤„äºå†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        # dp[i][2] æ‰‹ä¸Šä¸æŒæœ‰è‚¡ç¥¨ï¼Œå¹¶ä¸”ä¸åœ¨å†·å†»æœŸä¸­çš„ç´¯è®¡æœ€å¤§æ”¶ç›Š
        dp = [[-prices[0], 0, 0]] + [[0] * 3 for _ in range(n - 1)]

        for i in range(1, n):
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][2] - prices[i])
            dp[i][1] = dp[i - 1][0] + prices[i]
            dp[i][2] = max(dp[i - 1][1], dp[i - 1][2])

        return max(dp[n - 1][1], dp[n - 1][2])
# leetcode submit region end(Prohibit modification and deletion)
