# è€å¸ˆæƒ³ç»™å­©å­ä»¬åˆ†å‘ç³–æœï¼Œæœ‰ N ä¸ªå­©å­ç«™æˆäº†ä¸€æ¡ç›´çº¿ï¼Œè€å¸ˆä¼šæ ¹æ®æ¯ä¸ªå­©å­çš„è¡¨ç°ï¼Œé¢„å…ˆç»™ä»–ä»¬è¯„åˆ†ã€‚ 
# 
#  ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹è¦æ±‚ï¼Œå¸®åŠ©è€å¸ˆç»™è¿™äº›å­©å­åˆ†å‘ç³–æœï¼š 
# 
#  
#  æ¯ä¸ªå­©å­è‡³å°‘åˆ†é…åˆ° 1 ä¸ªç³–æœã€‚ 
#  è¯„åˆ†æ›´é«˜çš„å­©å­å¿…é¡»æ¯”ä»–ä¸¤ä¾§çš„é‚»ä½å­©å­è·å¾—æ›´å¤šçš„ç³–æœã€‚ 
#  
# 
#  é‚£ä¹ˆè¿™æ ·ä¸‹æ¥ï¼Œè€å¸ˆè‡³å°‘éœ€è¦å‡†å¤‡å¤šå°‘é¢—ç³–æœå‘¢ï¼Ÿ 
# 
#  
# 
#  ç¤ºä¾‹ 1ï¼š 
# 
#  
# è¾“å…¥ï¼š[1,0,2]
# è¾“å‡ºï¼š5
# è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™è¿™ä¸‰ä¸ªå­©å­åˆ†å‘ 2ã€1ã€2 é¢—ç³–æœã€‚
#  
# 
#  ç¤ºä¾‹ 2ï¼š 
# 
#  
# è¾“å…¥ï¼š[1,2,2]
# è¾“å‡ºï¼š4
# è§£é‡Šï¼šä½ å¯ä»¥åˆ†åˆ«ç»™è¿™ä¸‰ä¸ªå­©å­åˆ†å‘ 1ã€2ã€1 é¢—ç³–æœã€‚
#      ç¬¬ä¸‰ä¸ªå­©å­åªå¾—åˆ° 1 é¢—ç³–æœï¼Œè¿™å·²æ»¡è¶³ä¸Šè¿°ä¸¤ä¸ªæ¡ä»¶ã€‚ 
#  Related Topics è´ªå¿ƒç®—æ³• 
#  ğŸ‘ 539 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
from typing import List


class Solution:
    def candy(self, ratings: List[int]) -> int:
        """ç©ºé—´O(1)æ›´èŠ‚çœç©ºé—´ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(n)ï¼Œä½†æ˜¯åªéå†ä¸€éï¼Œæ¯”æ–¹æ³•ä¸€æ›´å¿«"""
        n = len(ratings)
        ret = 1
        inc, dec, pre = 1, 0, 1

        for i in range(1, n):
            if ratings[i] >= ratings[i - 1]:
                dec = 0
                pre = (1 if ratings[i] == ratings[i - 1] else pre + 1)
                ret += pre
                inc = pre
            else:
                dec += 1
                if dec == inc:
                    dec += 1
                ret += dec
                pre = 1

        return ret

    def candy1(self, ratings: List[int]) -> int:
        """ç©ºé—´O(n)æŠŠæ‰€æœ‰å­©å­çš„ç³–æœæ•°åˆå§‹åŒ–ä¸º 1ï¼›
        å…ˆä»å·¦å¾€å³éå†ä¸€éï¼Œå¦‚æœå³è¾¹å­©å­çš„è¯„åˆ†æ¯”å·¦è¾¹çš„é«˜ï¼Œåˆ™å³è¾¹å­©å­çš„ç³–æœæ•°æ›´æ–°ä¸ºå·¦è¾¹å­©å­çš„ ç³–æœæ•°åŠ  1ï¼›
        å†ä»å³å¾€å·¦éå†ä¸€éï¼Œå¦‚æœå·¦è¾¹å­©å­çš„è¯„åˆ†æ¯”å³è¾¹çš„é«˜ï¼Œä¸”å·¦è¾¹å­©å­å½“å‰çš„ç³–æœæ•°ä¸å¤§äºå³è¾¹å­©å­çš„ç³–æœæ•°ï¼Œåˆ™å·¦è¾¹å­©å­çš„ç³–æœæ•°æ›´æ–°ä¸ºå³è¾¹å­©å­çš„ç³–æœæ•°åŠ  1ã€‚
        é€šè¿‡è¿™ä¸¤æ¬¡éå†ï¼Œ åˆ†é…çš„ç³–æœå°±å¯ä»¥æ»¡è¶³é¢˜ç›®è¦æ±‚äº†ã€‚è¿™é‡Œçš„è´ªå¿ƒç­–ç•¥å³ä¸ºï¼Œåœ¨æ¯æ¬¡éå†ä¸­ï¼Œåªè€ƒè™‘å¹¶æ›´æ–°ç›¸é‚»ä¸€ ä¾§çš„å¤§å°å…³ç³»ã€‚"""
        n = len(ratings)
        candies = [1] * n
        for i in range(1, n):
            if ratings[i] > ratings[i - 1]:
                candies[i] = candies[i - 1] + 1
        for i in range(n - 2, -1, -1):
            if ratings[i] > ratings[i + 1] and candies[i] <= candies[i + 1]:
                candies[i] = candies[i + 1] + 1
        return sum(candies)
# leetcode submit region end(Prohibit modification and deletion)
